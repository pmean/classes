---
title: "05-00, Resources needed for module 05 slides"
format: 
  html:
    embed-resources: true
editor: source
---

## Preliminaries

```{r}
#| message: false
#| warning: false
#| label: 05-00-setup

library(tidyverse)
```

## Read and parse simon-5505-04-demo.qmd

```{r}
#| label: read

demo_text <- read_lines("simon-5505-05-demo.qmd")
```

```{r}
#| label: find-labels

label_rows <- str_which(
	demo_text,
	fixed("#| label: "))

label_rows
```

```{r}
#| label: find-backticks

backtick_rows <- str_which(
	demo_text,
	"^```$")

backtick_rows
```

```{r}
#| label: extract-names

demo_text[label_rows] |>
	str_remove(fixed("#| label: ")) |>
	str_replace_all("-", "_") -> v

v
```

```{r}
#| label: extract-chunks

prefix <- "```{}"
code <- NULL
for (i in 1:length(label_rows)) {
	r <- (label_rows[i]+2):(backtick_rows[i])
  chunk <- c(prefix, demo_text[r])
	code[i] <- paste0(chunk, collapse="\n")
}
names(code) <- v
```

```{r}
#| label: display-code

for (u in names(code)) {
  cat("\n\n----- ")
  cat(u)
  cat(" -----\n")
  cat(code[u])
} 
```

## Save everything important

```{r save}

save(code, file="../data/module-05.RData")
```
