---
title: "Comments for MEDB 5501, Week 5"
format: 
  revealjs:
    slide-number: true
    embed-resources: true
editor: visual
---

## Diet data dictionary, 1 of 3

```         
data_dictionary: diet.txt

source:
  This data file is part of the Data and 
  Story library, an archive of various
  data sets useful for teaching.
  The entire archive is at
  https://dasl.datadescription.com/

description:
  This data set shows side effects of specially
  prepared diet crackers. A more detailed
  description is available at
  https://dasl.datadescription.com/datafile/diet/
  
```

::: notes
Here is the top third of the data dictionary for a file, diet.txt. It comes from the DASL repository.
:::

## Diet data dictionary, 2 of 3

```         
download:
  https://dasl.datadescription.com/download/data/3163
  
copyright:  
  Unknown. You should be able to use this data for
  individual educational purposes under the Fair Use
  guidelines of U.S. copyright law.

format: 
  delimiter: tab
  varnames: first row of data
  missing-value-code: not needed
  rows: 51
  columns: 2
```

::: notes
This is a tab delimited file with 51 rows and 2 columns.
:::

## Diet data dictionary, 3 of 3

```         
vars:
  Bloat:
    label: Did the patient experience bloating?
    format: string

  Cracker:
    label: Type of cracker
    format: string
```

::: notes
There are two variables, Bloat and Cracker. Both are strings.
:::

## 

![SPSS Data View](../images/diet-analysis-01.png){#fig-diet01}

::: notes
Here is what the first few rows of data show.
:::

## 

![SPSS Chart Builder, stacked bar chart, before adding variables](../images/diet-analysis-02.png){#fig-diet02}

::: notes
To create any type of chart, select Graphs \| Chart Builder from the SPSS menus. Then drag and drop the chart type. Here, you see the stacked bar chart, represented by the icon in the first row, third from the left.
:::

## 

![SPSS Chart Builder, stacked bar chart, after adding variables](../images/diet-analysis-03.png){#fig-diet03}

::: notes
Drag and drop the variables into the X-axis and Stack windows.
:::

## 

![SPSS output, original (default) bar chart](../images/diet-analysis-04.png){#fig-diet04}

::: notes
Here is the default graph produced by SPSS. Let's see what modifications can be made.
:::

## 

![SPSS Properties dialog box, options menu](../images/diet-analysis-05.png){#fig-diet05}

::: notes
Select Options \| Scale to 100% to use percentages rather than counts.
:::

## 

![SPSS Properties dialog box, Categories tab](../images/diet-analysis-06.png){#fig-diet06}

::: notes
This dialog box allows you to change the order of the bars.
:::

## 

![SPSS Properties dialog box, Number Format tab](../images/diet-analysis-07.png){#fig-diet07}

::: notes
This dialog box allows you to control the number of decimals displayed on the axes.
:::

## 

![SPSS Properties dialog box, Fill & Border tab](../images/diet-analysis-08.png){#fig-diet08}

::: notes
This dialog box allows you to change the fill and border colors of the bars.
:::

## 

![SPSS output, modified bar chart](../images/diet-analysis-09.png){#fig-diet09}

::: notes
Here is the modified bar chart.
:::

## Break 1

-   What have you learned?
    -   Creating and modifying stacked bar chart
-   What's coming next
    -   Titanic data, stacked bar chart

::: notes
Time for a break. Any questions?
:::

## Titanic data dictionary, 1 of 3

```         
data_dictionary: titanic.txt

description:
  Mortality among passengers of the Titanic
  http://www.statsci.org/data/general/titanic.html

download:
  http://www.statsci.org/data/general/titanic.txt
  http://www.pmean.com/15/images/day2titanic.txt
```

::: notes
Ths is the data dictionary for the titanic data. You can find a nice description of the data at the website listed here.
:::

## Titanic data dictionary, 2 of 3

```         
vars:
  Name:
    label: Passenger name
  
  PClass:
    label: Passenger class
    scale: ordinal text categories
    values: 1st, 2nd, 3rd
    
  Age:
    unit: years
    scale: positive real
    missing: NA
```

::: notes
This shows details for the first three variables in the titanic data set.
:::

## Titanic data dictionary, 3 of 3

```         
  Sex:
    scale: nominal text categories
    values: female, male

  Survived:
    scale: binary integer categories
    values:
      yes: 1
      no: 0 
```

::: notes
This is information on the remaining two variables.
:::

## 

![SPSS Data View](../images/titanic-analysis-01.png){#fig-titanic01}

::: notes
This is a listing of the first few rows of the data.
:::

## 

![SPSS Chart Builder, stacked bar chart](../images/titanic-analysis-02.png){#fig-titanic02}

::: notes
To create a stacked bar chart, select Graph \| Chart Builder from the SPSS menu. Drag and drop the stacked bar chart icon (first row, third from the left). Drag and drop one categorical variable in the x-axis box and one in the stack box.
:::

## 

![SPSS Properties dialog box, Fill & Border tab](../images/titanic-analysis-03.png){#fig-titanic03}

::: notes
If you wish to modify the bar chart, double click on the graph. This calls up the properties dialog box. The properties dialog box has different tabs to allow you to make specific changes to individual features of the bar chart. Click on the middle of one of the bars and you should see a change in the dialog box. Click on the Fill & Border tab. You can now change the color of the bar.

Notice the two choices, white and transparent, at the top of the color choices. White will hide anything behind it. Transparent will not.
:::

## 

![SPSS Properties Dialog Box, Number Format tab](../images/titanic-analysis-04.png){#fig-titanic04}

::: notes
Add note.
:::

## 

![SPSS output, modified bar chart](../images/titanic-analysis-05.png){#fig-titanic05}

::: notes
This is what the final plot looks like. I'm not thrilled with this graph and might consider different colors or other enhancements.
:::

## Break 2

-   What have you learned?
    -   Titanic data, stacked bar chart
-   What's coming next
    -   Housing data, scatterplot

::: notes
Time for a break. Any questions?
:::

## Housing data dictionary, 1 of 5

```         
source: 
  This file was found originally at a website 
  DASL (Data And Story Library) that is no 
  longer available. 

description:  
  The original source describes the data as
  "a random sample of records of resales of 
  homes from Feb 15 to Apr 30, 1993 from the
  files maintained by the Albuquerque Board 
  of Realtors. This type of data is 
  collected by multiple listing agencies in
  many cities and is used by realtors as an
  information base."
```

::: notes
I've used this data in a lot of my classes, but it is no longer available on the web. There are lots of other similar data sets on housing resales.

Sales from 1993 are now three decades old, so some of the details may seem out of date.
:::

## Housing data dictionary, 2 of 5

```         
copyright:  
    Unknown. You should be able to use this data for
  individual educational purposes under the Fair Use
  guidelines of U.S. copyright law.

format: 
  delimiter: space
  varnames: first row of data
  missing-value-code: *
  rows: 117
  columns: 8
```

::: notes
This data uses an asterisk to denote missing values. This will cause a bit of a hassle, but not too much during data import.
:::

## Housing data dictionary, 3 of 5

```         
vars:
  Price:
    label: Selling price
    unit: dollars
    
  SquareFeet:
    label: Living space
    unit: square feet
    
  AgeYears:
    label: Age of home
    unit: years
```

::: notes
Here are the first three variables in the data. The key variable in all my analyses would be the selling price. This might be influenced by the size of the home and/or how old the home is.
:::

## Housing data dictionary, 4 of 5

```         
  NumberFeatures:
    label: 
      Home features (dishwasher, refrigerator,
      microwave, disposer, washer, intercom, 
      skylight(s), compactor, dryer, handicap
      fit, cable TV access)
    scale: count
    range: 0 to 11  
    
  Northeast:
    label: Located in northeast sector of city?
    values:
      Yes: 1
      No: 0
```

::: notes
This data is from 1993, and some of the features that were optional then are pretty much standard now. Location may or may not be important, and the data has an indicator of whether the house is located in the northeast sector of the city.
:::

## Housing data dictionary, 5 of 5

```         
  CustomBuild:
    label: Custom built?
    values:
      Yes: 1
      No: 0
    
  CornerLot:
    label: Corner location?
    values:
      Yes: 1
      No: 0

  Tax:
    label: Yearly property tax
    unit: dollars
```

::: notes
Here is information on the final three variables. Some houses are built to a pre-existing plan, but others are custom designed with an architect. Houses on a corner lot have some disadvantages, such as noise and less privacy. Finally, the yearly tax bill should be correlated with the price, though sometimes the government valuation of a property is out of date.
:::

## 

![SPSS Variable View with default choices](../images/housing-analysis-01.png){#fig-housing01}

::: notes
SPSS usually does pretty well with its default choices, but not here. There are several issues of immediate concern. SPSS used scientific notation for price, and failed to recognize age and tax as numbers, not strings. This was a side effect of coding missing values as NA. NA is a great choice for R, but SPSS (and SAS) both prefer a single dot. Finally, SPSS did not like the ne variable because it conflicts with the ne code for not equal to in SPSS syntax.

These are all easy to fix.
:::

## 

![SPSS Variable View, updated](../images/housing-analysis-02.png){#fig-housing02}

::: notes
This shows the updated view with the correct variable types and variable names. I also included value labels for the 0, 1 codes.
:::

## 

![SPSS chart builder dialog box](../images/housing-analysis-03.png){#fig-housing03}

::: notes
This is the chart builder dialog box for a simple scatterplot. Drag and drop the icon in the first row, first on the left.
:::

## 

![SPSS Properties dialog box, Scale tab](../images/housing-analysis-04.png){#fig-housing04}

::: notes
Double click on the scatterplot to call up the properties dialog box. Then double click on the Y-axis. The scale tab allows you to include zero on the Y-axis.
:::

## 

![SPSS Properties dialog box, Number Format tab](../images/housing-analysis-05.png){#fig-housing05}

::: notes
Click on the numbers format tab to make the numbers on this axis look nicer. This screenshot shows how to add a dollar sign to the front of the number and to use a comma separator.
:::

## 

![SPSS Properties dialog box. Labels & Ticks tab](../images/housing-analysis-06.png){#fig-housing06}

::: notes
It's a bit odd that SPSS does not use tick marks as a default option on scatterplots. You can update this in the Labels & Ticks tab.
:::

## 

![SPSS Chart Editor, Options menu](../images/housing-analysis-07.png){#fig-housing07}

::: notes
Another puzzling default in SPSS is the use of grid lines for the Y-axis, but not the X-axis. You can modify this from the options menu.
:::

## 

![SPSS Properties dialog box](../images/housing-analysis-08.png){#fig-housing08}

::: notes
Circles are good markers, but I prefer to see behind the color rather than having a filled in circle. You can change the fill color to transparent in the marker tab. A transparent fill helps a lot when there are a bunch of points almost on top of one another.
:::

## Break 3

-   What have you learned?
    -   Housing data, scatterplot
-   What's coming next
    -   Housing data, boxplot

::: notes
Time for a break. Any questions?
:::

## 

![SPSS chart builder](../images/housing-analysis-21.png){#fig-housing21}

::: notes
To draw a boxplot, drag and drop the boxplot icon (first row, first from the left). Add the categorical variable to the X axis and the continuous variable to the Y axis.
:::

## 

![SPSS output](../images/housing-analysis-22.png){#fig-housing22}

::: notes
This is the default visualization of the boxplots. I want to show a few modifications.
:::

## 

![SPSS Properties dialog box](../images/housing-analysis-23.png){#fig-housing23}

::: notes
SPSS will tell you the row number of any outliers, but it is something that is only of internal interest. Anyone reading your paper will not know or care about the row number. So I am going to make the row numbers invisible (transparent).
:::

## 

![SPSS options menu](../images/housing-analysis-24.png){#fig-housing24}

::: notes
I like to turn the boxplots sideways. They seem to fit better on the page.
:::

## 

![SPSS Properties dialog box](../images/housing-analysis-25.png){#fig-housing25}

::: notes
Once you turn the plot sideways, adjust the size so that it is wide, but not tall.
:::

## 

![SPSS Properties dialog box](../images/housing-analysis-26.png){#fig-housing26}

::: notes
SPSS, by default, adds color to the boxplot. I do not like this, and will usually change the color to white.

Note that transparent does not work well with the boxplot.
:::

## 

![SPSS output](../images/housing-analysis-27.png){#fig-housing27}

::: notes
This is what the modified boxplot looks like. There are a few things I do not like, such as the amount of space between the two categories. I would place them closer. But SPSS does not give you that level of control.
:::

## Alternatives to the boxplot

-   Bar chart or line chart
    -   Should you include error bars?
-   Scatterplot

::: notes
Although I do not like bar charts or line charts in place of boxplots, they are popular. Sometimes I will grudgingly admit that they work well. They are sometimes preferred to clustered boxplots, which you will see a bit later.
:::

## 

![SPSS output](../images/housing-analysis-28.png){#fig-housing28}

::: notes
Here's another boxplot. This looks at the number of features in a house versus price.
:::

## 

![SPSS output](../images/housing-analysis-29.png){#fig-housing29}

::: notes
Number of features could be compared using a scatterplot rather than a boxplot. It is worthwhile to draw both and compare them. I'm not sure which one I like better, but maybe the scatterplot.
:::

## Break 4

-   What have you learned?
    -   Housing data, boxplot
-   What's coming next
    -   Adding a third variable

::: notes
Time for a break. Any questions?
:::

## 

![SPSS chart builder](../images/housing-analysis-30.png){#fig-housing30}

::: notes
Add note.
:::

## 

![SPSS output](../images/housing-analysis-31.png){#fig-housing31}

::: notes
Add note.
:::

## 

![SPSS Chart Builder, scatterplot with colors](../images/housing-analysis-09.png){#fig-housing09}

::: notes
You can add a third variable using color. Drag and drop the icon in the first row, fourth from the right.
:::

## 

![SPSS output](../images/housing-analysis-10.png){#fig-housing10}

::: notes
This is what the plot looks like with the default options. It is not too bad, but could use some improvement. The trend between square footage and price is similar for the custom built and regular houses, though the custom built houses are a bit more expensive.
:::

## 

![SPSS chart builder](../images/housing-analysis-11.png){#fig-housing11}

::: notes
Add note.
:::

## 

![SPSS](../images/housing-analysis-12.png){#fig-housing12}

::: notes
Add note.
:::

## Break 5

-   What have you learned?
    -   Adding a third variable
-   What's coming next
    -   Best practices for visualization

::: notes
Time for a break. Any questions?
:::

## General purpose of visualization

-   Why use a graph?
    -   Table look-up
    -   Comparison
    -   Pattern recognition
-   What makes a good graph?
    -   Speed
    -   Accuracy

::: notes
There are three basic things that people use graphs for.
:::

## 

![What percentage of second class passengers died?](../images/titanic-analysis-05.png){#fig-titanic05}

::: notes
An example of table look-up is shown in this bar graph.
:::

## 

![How much worse was the mortality rate among third class passengers?](../images/titanic-analysis-05.png){#fig-titanic05}

::: notes
An example of comparison is also shown in this bar graph.
:::

## 

![How does passenger class affect mortality rates?](../images/titanic-analysis-05.png){#fig-titanic05}

::: notes
You can also look for patterns in this graph.
:::

## Use proximity to your advantage

-   Closeness makes comparisons faster, more accurate
    -   Comparisons of greatest interest
    -   Most difficult comparisons
-   Place most important bar/boxplot closest to Y-axis

::: notes
Add note.
:::

## 

![Diagonal comparisons are difficult](../images/diagonal-comparison.jpg){#fig-diagonal}

::: notes
Comparisons involve the shifting of one segment of a graph to another segment to see which one is bigger. This can involve a horizontal or vertical shift, which is usually not too difficult. A diagonal shift, however, is not as easy. It takes longer and is likely to be less accurate. This graph shows a comparison of a green bar near the top to a blue bar near the bottom. It's hard because of the poor proximity, but also because of the diagonal direction. Comparing the top yellow bar to the bottom yellow bar, in contrast is a bit easier. Still not easy because of the distance, of course.

When you are planing the order of the stacked bars, keep in mind that the best location is the first bar, the one on the left or at the bottom, depending on the orientation. Put the most important category here. The middle bars will usually require a diagonal projection. The last bar (at the top or the right) might be a diagonal projection, unless the total across all the bars is constant, as in a percentage.
:::

## 

![Comparisons in pie charts are difficult](../images/pie-chart.jpg){#fig-pie} 

::: notes
Pie charts are controversial. Many researchers dislike them because comparisons among the wedges are difficult. It is never a horizontal or vertical projection.

I generally avoid pie charts. They are not a terrible choice, but there is often a better choice. 
:::

## Two versus many colors

+ See webpage

## Colors for nominal versus ordinal

+ See webpage

## Summary

-   Stacked bar chart
-   Scatterplot
-   Boxplot
-   Adding a third variable
-   Best practices

::: notes
You've seen a lot of material. Are there any questions?
:::
